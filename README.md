
## **Документация проекта**

### **1. Общее описание проекта**
**Название проекта**: TelBot  
**Описание**: TelBot — это телеграм-бот для работы с деревом категорий. Основные функции включают просмотр дерева категорий, добавление и удаление элементов, скачивание дерева в формате Excel.

**Ключевые возможности**:
- Просмотр дерева категорий.
- Добавление/удаление элементов.
- Экспорт дерева категорий в Excel.

---

### **2. Технические детали**

#### **2.1 Архитектура**
Проект основан на **Spring Boot** и использует **TelegramBots API** для интеграции с Telegram.

- **Бизнес-логика**: Управление категориями осуществляется с помощью сервиса `CategoryService`.
- **Telegram API**: Взаимодействие с пользователями реализовано через `CategoryBot` (наследник `TelegramLongPollingBot`).
- **База данных**: Хранение данных реализовано через реляционную базу данных PostgreSQL.
- **Обработка команд**: Реализована через `CommandManager`, который управляет командами, связанными с категориями.

#### **2.2 Используемые технологии**
- **Язык разработки**: Java
- **Фреймворк**: Spring Boot
- **Telegram API**: TelegramBots (версия 6.9.7.1)
- **База данных**: PostgreSQL
- **Инструменты сборки**: Maven

---

### **3. Описание функционала**

#### **3.1 Команды**
- **/viewTree** — выводит текущее дерево категорий.
- **/addElement <название элемента>** — добавляет элемент в дерево категорий.
- **/addElement <родительский элемент> <дочерний элемент>** - добавляет дочернего элемента к существующему элементу.
- **/removeElement <название элемента>** — удаляет элемент из дерева.
- **/download** — отправляет Excel-файл с деревом категорий.
- **/help** — выводит список доступных команд.

#### **3.2 Потоки выполнения**
- **/download**:
    1. Генерация дерева категорий в формате Excel.
    2. Отправка файла пользователю через Telegram API.

---

### **4. Инструкции для разработчиков**

#### **4.1 Структура проекта**
```plaintext
src/main/java/com/pandev/telbot/
├── command/         # Реализация команд бота
├── model/           # Сущности и модели данных, которые используются для работы с базой данных
├── repository/      # Репозитории для взаимодействия с базой данных (Spring Data JPA, Hibernate и т.д.)
├── service/         # Логика обработки категорий и другие сервисы приложения
├── telegrambot/     # Основной класс CategoryBot
└── TelbotApplication.java # Точка входа в приложение
```

#### **4.2 Основные модули**
- **CommandManager**: Управляет регистрацией и выполнением команд.
- **CategoryService**: Содержит бизнес-логику для работы с категориями.
- 
---

### **6. Руководство пользователя**

#### **6.1 Как начать работать с ботом**
1. Найдите бота в Telegram по имени: **Pandev_Test_CategoryTreeBot_bot**.
2. Введите `/help`, чтобы получить список доступных команд.

#### **6.2 Пример работы**
- Для добавления категории:
  ```
  /addElement Фрукты
  ```  
- Для скачивания дерева категорий:
  ```
  /download
  ```  

